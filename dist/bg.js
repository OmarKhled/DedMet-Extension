(()=>{"use strict";const e=function(e){return{headers:{accept:"application/json, text/javascript, */*; q=0.01","content-type":"application/json",Cookie:"MoodleSession=".concat(e),Connection:"keep-alive"},referrer:"https://courses.nu.edu.eg/my/index.php",referrerPolicy:"strict-origin-when-cross-origin",body:'[{"index":0,"methodname":"core_calendar_get_calendar_monthly_view","args":{"year":2022,"month":3,"courseid":1,"categoryid":0,"includenavigation":true,"mini":true}}]',method:"POST",mode:"cors",credentials:"include"}};var n=function(e){var n=e.url;if(n.includes("core_calendar_get_calendar_monthly_view")){var r=n.split("=")[1].split("&")[0];setTimeout((function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{key:r,type:"sesskey"},(function(e){console.log(e),t(r,e.cookie)}))}))}),200)}},t=function(t,r){return o=void 0,i=void 0,a=function(){var o;return function(e,n){var t,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=n.call(e,c)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(i){switch(i.label){case 0:return chrome.webRequest.onBeforeRequest.removeListener(n),[4,fetch("https://courses.nu.edu.eg/lib/ajax/service.php?sesskey=".concat(t,"&info=core_calendar_get_calendar_monthly_view"),e(r))];case 1:return[4,i.sent().json()];case 2:return o=i.sent(),console.log(o),setTimeout((function(){chrome.webRequest.onBeforeRequest.addListener(n,{urls:["<all_urls>"]})}),200),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{timeline:o,type:"timeline"})})),[2]}}))},new((c=void 0)||(c=Promise))((function(e,n){function t(e){try{s(a.next(e))}catch(e){n(e)}}function r(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var o;n.done?e(n.value):(o=n.value,o instanceof c?o:new c((function(e){e(o)}))).then(t,r)}s((a=a.apply(o,i||[])).next())}));var o,i,c,a};chrome.webRequest.onBeforeRequest.addListener(n,{urls:["<all_urls>"]})})();