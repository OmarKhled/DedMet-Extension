(()=>{"use strict";var e=function(){return e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},e.apply(this,arguments)},n=function(e){var n,t;if(!document.querySelector("aside#block-region-side-post")){var r=document.createElement("aside");r.setAttribute("id","block-region-side-post"),r.setAttribute("class","col-3 d-print-none block-region"),null===(n=document.querySelector("#region-main"))||void 0===n||n.setAttribute("class","col-9"),null===(t=document.querySelector("#page-content"))||void 0===t||t.appendChild(r)}var i=document.querySelector("aside#block-region-side-post");console.log("container",i);var l=document.querySelector("section.block_calendar_month"),a=document.createElement("div");a.innerHTML='<div id="timeline" class="block_html block mb-3" style="position: relative;">\r\n  <div class="header">\r\n    <div class="title">\r\n      <h2 class="d-inline" style="display: flex; align-items: center;">\r\n        <svg alt="logo" width="100" style="display: inline; margin-top: 0.3rem;" xmlns="http://www.w3.org/2000/svg"\r\n          id="Layer_1" data-name="Layer 1" viewBox="0 0 890.04 189.77">\r\n          <defs>\r\n            <style>\r\n              .cls-1 {\r\n                fill: #184c7f;\r\n              }\r\n\r\n              .cls-2 {\r\n                fill: #71bfff;\r\n              }\r\n\r\n              .cls-3 {\r\n                fill: #3198ff;\r\n              }\r\n            </style>\r\n          </defs>\r\n          <path class="cls-1"\r\n            d="M78.08,19.62q36.19,0,55.47,20.09t19.27,57q0,36.92-19.27,57T78.08,173.78H12.68V19.62Zm-4,123.8q19.62,0,28.61-11.8t9-34.92q0-23.13-9-34.92T74.11,50H52.85v93.43Z" />\r\n          <path class="cls-1"\r\n            d="M234.57,176.12q-19.4,0-33.52-7.24a51.69,51.69,0,0,1-21.84-20.79q-7.71-13.54-7.71-32.7t7.71-32.7A52,52,0,0,1,200.82,61.9q13.89-7.24,31.88-7.24,18.45,0,31.42,7.12A48.36,48.36,0,0,1,283.85,81.4q6.78,12.5,6.77,28.61c0,2.81-.07,5.61-.23,8.41a67.57,67.57,0,0,1-.7,7H197.2V104.18h75l-18.92,7.24q0-14-5-21.49T232.7,82.45A22.37,22.37,0,0,0,220,86q-5.25,3.5-7.94,11t-2.69,19.16q0,11.44,3,18.57T221,144.93a27.16,27.16,0,0,0,13.55,3.16c5.91,0,10.63-1.17,14.13-3.51a21,21,0,0,0,7.83-9.81l31.76,10.51A36.92,36.92,0,0,1,277,162.22a54.16,54.16,0,0,1-19.15,10.39A76.64,76.64,0,0,1,234.57,176.12Z" />\r\n          <path class="cls-1"\r\n            d="M355.79,176.12q-14.48,0-25.34-7.13t-16.82-20.67q-6-13.55-5.95-32.47,0-19.62,6.19-33.16T331.15,61.9a45.72,45.72,0,0,1,25.58-7.24q15.87,0,25.57,9.69T394.8,89l-3.74,4.91V7.48h39.71v166.3h-35.5l-2.57-39.71,4.67,3.51a46.35,46.35,0,0,1-7.12,20.32,40.54,40.54,0,0,1-14.49,13.43A41,41,0,0,1,355.79,176.12Zm13.78-29.2a18.61,18.61,0,0,0,11.57-3.62q4.78-3.62,7.35-10.86a53.56,53.56,0,0,0,2.57-17.75A50,50,0,0,0,388.61,98a22.06,22.06,0,0,0-7.24-10.51,18.64,18.64,0,0,0-11.56-3.62q-10.29,0-16.24,7.59t-5.95,24q0,16.35,5.84,23.94T369.57,146.92Z" />\r\n          <path class="cls-1"\r\n            d="M707.07,176.12q-19.4,0-33.52-7.24a51.69,51.69,0,0,1-21.84-20.79Q644,134.55,644,115.39t7.71-32.7A52,52,0,0,1,673.32,61.9q13.89-7.24,31.88-7.24,18.45,0,31.41,7.12A48.39,48.39,0,0,1,756.35,81.4q6.76,12.5,6.77,28.61c0,2.81-.07,5.61-.23,8.41a67.57,67.57,0,0,1-.7,7H669.7V104.18h75l-18.92,7.24q0-14-5-21.49T705.2,82.45A22.37,22.37,0,0,0,692.47,86q-5.26,3.5-7.94,11t-2.69,19.16q0,11.44,3,18.57t8.64,10.27a27.16,27.16,0,0,0,13.55,3.16q8.86,0,14.13-3.51a20.87,20.87,0,0,0,7.82-9.81l31.77,10.51a36.92,36.92,0,0,1-11.33,16.94,54.16,54.16,0,0,1-19.15,10.39A76.64,76.64,0,0,1,707.07,176.12Z" />\r\n          <path class="cls-1"\r\n            d="M867.53,57V85.26h-94.6V57Zm-34.8-37.14V132.2q0,8.42,4.09,12t11.33,3.62a32.42,32.42,0,0,0,9.69-1.28,22.84,22.84,0,0,0,7.36-3.86l4.2,24.53a44.21,44.21,0,0,1-14.71,6.54,71.24,71.24,0,0,1-18.22,2.34q-13.32,0-23-3.74a30.09,30.09,0,0,1-15-11.91q-5.25-8.17-5.49-21.73V30.83Z" />\r\n          <path class="cls-1"\r\n            d="M536.6,82.94,465.94,9.16a5.1,5.1,0,0,0-8.78,3.53V166.61a5.1,5.1,0,0,0,8.78,3.52L536.6,96.35A9.69,9.69,0,0,0,536.6,82.94Z" />\r\n          <path class="cls-1"\r\n            d="M536.76,96.35l70.65,73.78a5.1,5.1,0,0,0,8.78-3.52V12.69a5.1,5.1,0,0,0-8.78-3.53L536.76,82.94A9.69,9.69,0,0,0,536.76,96.35Z" />\r\n          <path class="cls-2"\r\n            d="M551.55,92.12l46.13,48.16a4.15,4.15,0,0,0,7.14-2.86V41.88A4.15,4.15,0,0,0,597.68,39L551.55,87.18A3.58,3.58,0,0,0,551.55,92.12Z" />\r\n          <path class="cls-3"\r\n            d="M521.76,87,476.3,39.52a4.42,4.42,0,0,0-7.62,3.06v94.14a4.42,4.42,0,0,0,7.62,3.06l45.46-47.47A3.83,3.83,0,0,0,521.76,87Z" />\r\n        </svg>\r\n      </h2>\r\n    </div>\r\n  </div>\r\n  <div class="content" id="dedmet" style="position: relative; margin-top: 1.3rem; padding: 0 !important;">\r\n    <span class="overlay-icon-container" id="timeline-spinner" data-region="overlay-icon-container">\r\n      <span class="loading-icon icon-no-margin"><i class="icon fa fa-circle-o-notch fa-spin fa-fw " title="Loading"\r\n          aria-label="Loading"></i></span>\r\n    </span>\r\n  </div>\r\n\r\n</div>',null==i||i.insertBefore(a,l||document.querySelector("aside#block-region-side-post a:first-child")),e&&(document.getElementById("dedmet").innerHTML="Invalid or expired License Key")};chrome.runtime.sendMessage({msg:window.location.pathname},(function(e){return!0})),chrome.runtime.onMessage.addListener((function(t,r,i){if("sesskey"==t.type){var l=document.cookie.split("=")[1];console.log("Session ID: ".concat(t.key," & Cookie : ").concat(l)),i({cookie:l}),setTimeout((function(){n()}),300)}else if("invalidLicense"==t.type)console.log("invalidLicense"),setTimeout((function(){n(!0)}),300);else{var a=t.timeline;a.forEach((function(n){(console.log(a),n.error)?console.log("Fetching Error Occured"):function(n){var t,r=document.querySelector("#timeline .content"),i=e(e({},n),{weeks:n.weeks.map((function(n){return e(e({},n),{days:n.days.map((function(n){return e(e({},n),{events:n.events.filter((function(e){if(n.timestamp+86400>=Date.now()/1e3&&!["attendance","open","expectcompletionon"].includes(e.eventtype)){var t=function(e){var n=new XMLHttpRequest;for(n.open("GET",e,!1),n.send();4!==n.readyState;)if(4===n.readyState)return n.responseText;return n.responseText}(e.url).match("completed|submitted|Submitted|Finished|Completed");return console.log(null==t?void 0:t.length,e.name),!((null==t?void 0:t.length)>0)}}))})}))})}))});null===(t=document.getElementById("timeline-spinner"))||void 0===t||t.remove(),r&&(r.innerHTML+=function(e){var n,t="";Array.prototype.join,t+='<div style="padding-left: 10px;">\r\n  ';for(var r=0;r<e.timeline.weeks.length;r++){t+="\r\n    ";for(var i=0;i<e.timeline.weeks[r].days.length;i++){t+="\r\n      <h5>\r\n        ",e.timeline.weeks[r].days[i].events.length>0&&(t+="\r\n          "+(null==(n=e.timeline.weeks[r].days[i].viewdaylinktitle?.replace("events",""))?"":n)+"\r\n            "),t+="\r\n      </h5>\r\n      ";for(var l=0;l<e.timeline.weeks[r].days[i].events.length;l++)t+='\r\n        <div class=" eventElement mt-2">\r\n          <div style=" display: flex; gap: 1rem">\r\n            <div class="eventIcon">\r\n              <img src="https://courses.nu.edu.eg/theme/image.php/adaptable/assign/1628408864/icon" width="25"\r\n                height="25" style="max-width: fit-content;" />\r\n            </div>\r\n            <div class="eventDetails text-truncate">\r\n              <h5 class="text-truncate" style="margin: 0;"> <a href="'+(null==(n=e.timeline.weeks[r].days[i].events[l].url)?"":n)+'"\r\n                  style="color: #4a4a4a;">\r\n                  <span class="text-truncate">\r\n                    '+(null==(n=e.timeline.weeks[r].days[i].events[l].popupname)?"":n)+'\r\n                  </span>\r\n                </a></h5>\r\n              <q style="margin-bottom: 0.42rem; display: block;" class="text-muted muted text-truncate">\r\n                '+(null==(n=e.timeline.weeks[r].days[i].events[l].name)?"":n)+'\r\n              </q>\r\n              <a class="d-block" href="'+(null==(n=e.timeline.weeks[r].days[i].events[l].url)?"":n)+'"\r\n                style="padding-left: -.4rem;"> Go to event</a>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n        ';t+="\r\n          "}t+="\r\n            "}return t+"\r\n              </p>\r\n</div>"}({timeline:i}))}(n.data)}))}return!0}))})();